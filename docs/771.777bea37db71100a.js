"use strict";(self.webpackChunkstock_control=self.webpackChunkstock_control||[]).push([[771],{5771:(L,m,n)=>{n.r(m),n.d(m,{ProductsModule:()=>j});var h=n(6895),v=n(433),x=n(4466),y=n(529),g=n(4247),l=n(5593),a=n(4684),C=n(1740),E=n(3520),M=n(7913),D=n(3054),b=n(7188),p=n(5849),w=n(4028),f=n(2137),P=n(3608),c=n(805),T=n(8250),S=n(7579),u=n(2722),O=n(546),t=n(8256),U=n(1055),F=n(3861),J=n(52),A=n(1323);let R=(()=>{class r{transform(e,o){return null!==e?e.length>o?e.substring(0,o)+"...":e:""}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275pipe=t.Yjl({name:"shorten",type:r,pure:!0})}return r})();function B(r,Z){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),t._uU(4," Nome "),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),t.qZA()()(),t.TgZ(8,"th",11)(9,"div",8)(10,"div",8),t._uU(11," Quantidade "),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),t.qZA()()(),t.TgZ(15,"th",14)(16,"div",8)(17,"div",8),t._uU(18," Pre\xe7o "),t.qZA(),t.TgZ(19,"div",8),t._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),t.qZA()()(),t.TgZ(22,"th",17)(23,"div",8)(24,"div",8),t._uU(25," Descri\xe7\xe3o "),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),t.qZA()()(),t.TgZ(29,"th",20)(30,"div",8)(31,"div",8),t._uU(32," Categoria "),t.qZA(),t.TgZ(33,"div",8),t._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),t.qZA()()(),t.TgZ(36,"th")(37,"div",23)(38,"p-button",24),t.NdJ("onClick",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.handleProdctEvent(s.addProductEvent))}),t.qZA()()()()}2&r&&(t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function I(r,Z){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td",25),t._uU(9),t.ALo(10,"shorten"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",26)(15,"button",27),t.NdJ("click",function(){const i=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleProdctEvent(d.editProductEvent,null==i?null:i.id))}),t.qZA(),t.TgZ(16,"button",28),t.NdJ("click",function(){const i=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleDeleteProduct(null==i?null:i.id,null==i?null:i.name))}),t.qZA()()()()}if(2&r){const e=Z.$implicit;t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.amount),t.xp6(2),t.Oqu(t.xi3(7,6,null==e?null:e.price,"BRL")),t.xp6(2),t.Q6J("pTooltip",null==e?null:e.description),t.xp6(1),t.Oqu(t.xi3(10,9,e.description,25)),t.xp6(3),t.Oqu(e.category.name)}}const H=function(){return["mane","amount"]},$=function(){return{"min-width":"75rem"}};let N=(()=>{class r{constructor(){this.addProductEvent=A.h.ADD_PRODUCT_EVNT,this.editProductEvent=A.h.EDIT_PRODUCT_EVENT,this.products=[],this.productEvent=new t.vpe,this.deleteProductEvent=new t.vpe}handleProdctEvent(e,o){e&&""!==e&&this.productEvent.emit(o&&null!==o?{action:e,id:o}:{action:e})}handleDeleteProduct(e,o){null!==e&&""!==o&&this.deleteProductEvent.emit({product_id:e,product_name:o})}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-products-table"]],inputs:{products:"products"},outputs:{productEvent:"productEvent",deleteProductEvent:"deleteProductEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Produtos em estoque"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} Produtos",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["productsTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","amount"],["field","amount"],["type","text","field","amount","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","price"],["field","price"],["type","text","field","price","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","description"],["field","description"],["type","text","field","description","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","category.name"],["field","category.name"],["type","text","field","category.name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar Produto","tooltipPosition","top",3,"onClick"],["tooltipPosition","top",3,"pTooltip"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar Produto","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover Produto","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),t.NdJ("selectionChange",function(d){return s.productSelected=d}),t.YNc(5,B,39,15,"ng-template",5),t.YNc(6,I,17,12,"ng-template",6),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("value",s.products)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",t.DdM(9,H))("tableStyle",t.DdM(10,$))("selection",s.productSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[g.Z,c.jx,l.Hq,l.zx,a.iA,a.lQ,a.fz,a.xl,P.u,h.H9,R],encapsulation:2})}return r})();const Q=function(){return{width:"50vw"}},Y=[{path:"",component:(()=>{class r{constructor(e,o,s,i,d,z){this.productService=e,this.productsDTO=o,this.router=s,this.messageService=i,this.confirmationService=d,this.dialogService=z,this.destroy$=new S.x,this.productsDatas=[]}ngOnInit(){this.getServiceProductsDatas()}getServiceProductsDatas(){const e=this.productsDTO.getProductsDatas();e.length>0?this.productsDatas=e:this.getAPIProductsDatas()}getAPIProductsDatas(){this.productService.getAllProducts().pipe((0,u.R)(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.productsDatas=e)},error:e=>{console.log(e),this.router.navigate(["/dashboard"]),this.messageService.add({severity:"error",summary:"Erro.",detail:"Erro ao buscar produtos.",life:2e3})}})}handleProductAction(e){e&&(this.ref=this.dialogService.open(O.d,{header:e?.action,width:"70%",contentStyle:{overFlow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:e,productDatas:this.productsDatas}}),this.ref.onClose.pipe((0,u.R)(this.destroy$)).subscribe({next:()=>this.getAPIProductsDatas()}))}handleDeleteProductAction(e){e&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o do produto ${e?.product_name}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteProduct(e?.product_id)})}deleteProduct(e){e&&this.productService.deleteProduct(e).pipe((0,u.R)(this.destroy$)).subscribe({next:o=>{this.getAPIProductsDatas(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Produto Removido com sucesso!",life:2500})},error:o=>{console.log(o),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover produto!",life:2500})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(U.s),t.Y36(F.M),t.Y36(T.F0),t.Y36(c.ez),t.Y36(c.YP),t.Y36(p.xA))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-products-home"]],decls:3,vars:4,consts:[[3,"products","productEvent","deleteProductEvent"]],template:function(o,s){1&o&&(t._UZ(0,"app-toolbar-navigation"),t.TgZ(1,"app-products-table",0),t.NdJ("productEvent",function(d){return s.handleProductAction(d)})("deleteProductEvent",function(d){return s.handleDeleteProductAction(d)}),t.qZA(),t._UZ(2,"p-confirmDialog")),2&o&&(t.xp6(1),t.Q6J("products",s.productsDatas),t.xp6(1),t.Akn(t.DdM(3,Q)))},dependencies:[J.p,f.Q,N],encapsulation:2})}return r})()}];let j=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({providers:[p.xA,c.YP],imports:[h.ez,v.u5,v.UX,T.Bz.forChild(Y),x.m,y.JF,g.d,l.hJ,a.U$,C.j,E.zz,M.Iu,D.A,b.L$,p.DL,w.kW,f.D,P.z]})}return r})()}}]);