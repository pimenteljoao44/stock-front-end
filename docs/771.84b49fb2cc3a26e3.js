"use strict";(self.webpackChunkstock_control=self.webpackChunkstock_control||[]).push([[771],{5771:(X,g,n)=>{n.r(g),n.d(g,{ProductsModule:()=>G});var l=n(6895),f=n(433),y=n(4466),C=n(529),v=n(4247),p=n(5593),a=n(4684),E=n(1740),M=n(3520),D=n(7913),S=n(3054),b=n(7188),u=n(5849),w=n(4028),P=n(2137),T=n(3608),c=n(805),x=n(8250),O=n(7579),m=n(2722),U=n(546),t=n(8256),F=n(1055),J=n(3861),L=n(52),A=n(7932),Z=n(1323);let I=(()=>{class s{transform(e,o){return null!==e?e.length>o?e.substring(0,o)+"...":e:""}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275pipe=t.Yjl({name:"shorten",type:s,pure:!0})}return s})();function R(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),t._uU(4," Nome "),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),t.qZA()()(),t.TgZ(8,"th",11)(9,"div",8)(10,"div",8),t._uU(11," Quantidade "),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),t.qZA()()(),t.TgZ(15,"th",14)(16,"div",8)(17,"div",8),t._uU(18," Pre\xe7o "),t.qZA(),t.TgZ(19,"div",8),t._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),t.qZA()()(),t.TgZ(22,"th",17)(23,"div",8)(24,"div",8),t._uU(25," Descri\xe7\xe3o "),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),t.qZA()()(),t.TgZ(29,"th",20)(30,"div",8)(31,"div",8),t._uU(32," Categoria "),t.qZA(),t.TgZ(33,"div",8),t._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),t.qZA()()(),t.TgZ(36,"th")(37,"div",23)(38,"p-button",24),t.NdJ("onClick",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.handleProdctEvent(r.addProductEvent))}),t.qZA()()()()}2&s&&(t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function B(s,h){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td",25),t._uU(9),t.ALo(10,"shorten"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",26)(15,"button",27),t.NdJ("click",function(){const i=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleProdctEvent(d.editProductEvent,null==i?null:i.id))}),t.qZA(),t.TgZ(16,"button",28),t.NdJ("click",function(){const i=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.handleDeleteProduct(null==i?null:i.id,null==i?null:i.name))}),t.qZA()()()()}if(2&s){const e=h.$implicit;t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.amount),t.xp6(2),t.Oqu(t.xi3(7,6,null==e?null:e.price,"BRL")),t.xp6(2),t.Q6J("pTooltip",null==e?null:e.description),t.xp6(1),t.Oqu(t.xi3(10,9,e.description,25)),t.xp6(3),t.Oqu(e.category.name)}}const H=function(){return["mane","amount"]},N=function(){return{"min-width":"75rem"}};let Q=(()=>{class s{constructor(){this.addProductEvent=Z.h.ADD_PRODUCT_EVNT,this.editProductEvent=Z.h.EDIT_PRODUCT_EVENT,this.products=[],this.productEvent=new t.vpe,this.deleteProductEvent=new t.vpe}handleProdctEvent(e,o){e&&""!==e&&this.productEvent.emit(o&&null!==o?{action:e,id:o}:{action:e})}handleDeleteProduct(e,o){null!==e&&""!==o&&this.deleteProductEvent.emit({product_id:e,product_name:o})}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-products-table"]],inputs:{products:"products"},outputs:{productEvent:"productEvent",deleteProductEvent:"deleteProductEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Produtos em estoque"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} Produtos",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["productsTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","amount"],["field","amount"],["type","text","field","amount","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","price"],["field","price"],["type","text","field","price","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","description"],["field","description"],["type","text","field","description","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","category.name"],["field","category.name"],["type","text","field","category.name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar Produto","tooltipPosition","top",3,"onClick"],["tooltipPosition","top",3,"pTooltip"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar Produto","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover Produto","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),t.NdJ("selectionChange",function(d){return r.productSelected=d}),t.YNc(5,R,39,15,"ng-template",5),t.YNc(6,B,17,12,"ng-template",6),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("value",r.products)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",t.DdM(9,H))("tableStyle",t.DdM(10,N))("selection",r.productSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[v.Z,c.jx,p.Hq,p.zx,a.iA,a.lQ,a.fz,a.xl,T.u,l.H9,I],encapsulation:2})}return s})();const Y=function(){return{width:"50px",height:"50px",position:"fixed",top:"50%",left:"50%","margin-top":"-25px","margin-left":"-25px"}};function $(s,h){1&s&&t._UZ(0,"p-progressSpinner"),2&s&&t.Akn(t.DdM(2,Y))}const j=function(){return{width:"50vw"}},z=[{path:"",component:(()=>{class s{constructor(e,o,r,i,d,K){this.productService=e,this.productsDTO=o,this.router=r,this.messageService=i,this.confirmationService=d,this.dialogService=K,this.destroy$=new O.x,this.isLoading=!1,this.productsDatas=[]}ngOnInit(){this.getServiceProductsDatas()}getServiceProductsDatas(){const e=this.productsDTO.getProductsDatas();e.length>0?this.productsDatas=e:this.getAPIProductsDatas()}getAPIProductsDatas(){this.isLoading=!0,this.productService.getAllProducts().pipe((0,m.R)(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.productsDatas=e,this.isLoading=!1)},error:e=>{console.log(e),this.router.navigate(["/dashboard"]),this.messageService.add({severity:"error",summary:"Erro.",detail:"Erro ao buscar produtos.",life:2e3}),this.isLoading=!1}})}handleProductAction(e){e&&(this.ref=this.dialogService.open(U.d,{header:e?.action,width:"70%",contentStyle:{overFlow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:e,productDatas:this.productsDatas}}),this.ref.onClose.pipe((0,m.R)(this.destroy$)).subscribe({next:()=>this.getAPIProductsDatas()}))}handleDeleteProductAction(e){e&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o do produto ${e?.product_name}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteProduct(e?.product_id)})}deleteProduct(e){this.isLoading=!0,e&&this.productService.deleteProduct(e).pipe((0,m.R)(this.destroy$)).subscribe({next:o=>{this.getAPIProductsDatas(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Produto Removido com sucesso!",life:2500}),this.isLoading=!1},error:o=>{console.log(o),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover produto!",life:2500}),this.isLoading=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(o){return new(o||s)(t.Y36(F.s),t.Y36(J.M),t.Y36(x.F0),t.Y36(c.ez),t.Y36(c.YP),t.Y36(u.xA))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-products-home"]],decls:4,vars:5,consts:[[3,"style",4,"ngIf"],[3,"products","productEvent","deleteProductEvent"]],template:function(o,r){1&o&&(t._UZ(0,"app-toolbar-navigation"),t.YNc(1,$,1,3,"p-progressSpinner",0),t.TgZ(2,"app-products-table",1),t.NdJ("productEvent",function(d){return r.handleProductAction(d)})("deleteProductEvent",function(d){return r.handleDeleteProductAction(d)}),t.qZA(),t._UZ(3,"p-confirmDialog")),2&o&&(t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("products",r.productsDatas),t.xp6(1),t.Akn(t.DdM(4,j)))},dependencies:[l.O5,L.p,P.Q,A.G,Q],encapsulation:2})}return s})()}];let G=(()=>{class s{static#t=this.\u0275fac=function(o){return new(o||s)};static#e=this.\u0275mod=t.oAB({type:s});static#o=this.\u0275inj=t.cJS({providers:[u.xA,c.YP],imports:[l.ez,f.u5,f.UX,x.Bz.forChild(z),y.m,C.JF,v.d,p.hJ,a.U$,E.j,M.zz,D.Iu,S.A,b.L$,u.DL,w.kW,P.D,T.z,A.L]})}return s})()}}]);